<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>budget-arukereso</title>
    <link rel="stylesheet" href="index.css" />
  </head>
  <body>
    <fieldset id="searchfield">
      <legend>Search products</legend>

      <form action="" method="get" onsubmit="return startSearch()">
        <input required type="text" id="searchword" name="searchword" placeholder="Enter product name‚Ä¶" />
        <button type="submit">üîç</button>

        <select name="order" id="order">
          <option value="asc">Ascending</option>
          <option value="desc">Descending</option>
        </select>

        <details>
          <summary>Advanced search</summary>

          <label for="minPrice">Minimum price:</label>
          <input type="number" id="minPrice" name="minPrice" placeholder="4000" min="0" />

          <label for="maxPrice">Maximum price:</label>
          <input type="number" id="maxPrice" name="maxPrice" placeholder="10000" min="0" />

          <label for="size">Size (S‚ÄìXL):</label>
          <input type="text" id="size" name="size" placeholder="S, M, L, XL" />

          <label for="count">Number of items per site:</label>
          <input required type="number" id="count" name="count" value="3" min="1" />

          Websites:
          <div id="websites">
            <input type="checkbox" checked id="hervis" name="hervis" />
            <label for="hervis">Hervis</label>

            <input type="checkbox" checked id="sinsay" name="sinsay" />
            <label for="sinsay">Sinsay</label>

            
            <input type="checkbox" checked id="sportissimo" name="sportissimo" />
            <label for="sportissimo">Sportissimo</label>
          </div>
        </details>
      </form>
    </fieldset>

    <div id="waitingfield" hidden>
      <div class="spinner"></div>
      Loading results‚Ä¶
    </div>
    <div id="results">
      <% if (results) { %>
      <% results.map((result) => { %>
              <fieldset class="result">
                  <legend><%= result.websiteName %></legend>
                <div class="items">
                <% result.FoundImages.map((item) => { %>
                      <div class="item">
                    <a href="<%= item.href %>" target="_blank" rel="noopener">
                      <img src="<%= item.src || 'https://via.placeholder.com/300x300?text=Image' %>" alt="">
                    </a>
                    <div class="meta">
                      <div class="title"><%= item.title || 'Product' %></div>
                      <div class="price">
                        <span class="chip"><%= item.price %> Ft</span>
                      </div>
                    </div>
                  </div>
                <% }) %>
              </div>
            </fieldset>
          <% }) %>
          <% } %>
    </div>
    <script src="index.js"></script>
  </body>
</html>
